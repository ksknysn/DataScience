var dataLayer=dataLayer||[],gtm_products=gtm_products||[];
(function(d,l,C){dataLayer=d.dataLayer;gtm_products=d.gtm_products;var L=d.location.hostname,D=d.location.pathname,E=d.location.hash,A=!1,x=null,M=d.documentLanguage||"tr",N=-1<l.location.href.indexOf("gadebug"),f=function(){N&&console.log.apply(d.console,arguments)},h=function(a){var b={"\u00e7\u00c7":"c","\u011f\u011e":"g","\u015f\u015e":"s","\u00fc\u00dc":"u","\u0131\u0130":"i","\u00f6\u00d6":"o"};a=a.toString();for(var c in b)a=a.replace(new RegExp("["+c+"]","g"),b[c]);return a.replace(/[^_-a-zA-Z0-9\s]+/ig,
"").replace(/\s/gi,"-").replace(/[-]+/gi,"-").toLowerCase()},g=function(a,b){dataLayer.push(a);b&&(dataLayer.initialized=!0)},F=function(){E=d.location.hash;D=d.location.pathname;var a="/haritada-emlak-arama/ localhost banaozel.sahibinden.com /odeme-yap /emlak360/emlak-endeksi /hizmetler /kategori -hizmetleri /anasayfa-vitrin-ozet / /servisler /banaozel-ozet /kategoriler /emlak360 /oto360".split(" "),b=!1,c;for(c in a){var e=a[c];if(-1<L.indexOf(e)||-1<D.indexOf(e)||-1<E.indexOf(e)){b=!0;break}}return b},
m=function(a){if(!0===A&&!1===F())return!1;var b={event:"virtualPageView"};a&&a.charAt&&(a=("/"==a.charAt(0)?"":"/")+a,b.pageView=a);g(b);A=!0},B=function(a,b,c,e,d){null==e&&(e=0);g({Category:a,Action:b,Label:d?c:h(c),Value:e,event:"gaEvent"})},k=function(a,b,c){var e={};e[b]=c;g(e);G("gaCustomVarSetted",{index:a,name:b,value:c})},G=function(a,b){var c;l.createEvent?(c=l.createEvent("HTMLEvents"),c.initEvent("shbdn-"+a,!0,!0)):(c=l.createEventObject(),c.eventType="shbdn-"+a);c.__eventData=b;l.createEvent?
l.dispatchEvent(c):l.fireEvent("on"+c.eventType,c)},t,u=function(a){return"/"+a.join("/")+"/"},H=function(a,b){if(a){"undefined"!==typeof a.isStore&&b.push(a.isStore?"kurumsal":"bireysel");"undefined"!==typeof a.isGet&&b.push(a.isGet?"get":"ilan");if("undefined"!==typeof a.categories&&null!=a.categories&&0<a.categories.length)for(b.push("kat"),t=0,length=a.categories.length;t<length;t++)b.push(h(a.categories[t]));"undefined"!==typeof a.isUsed&&null!==a.isUsed&&"null"!==a.isUsed&&b.push(a.isUsed?"ikinci-el":
"sifir");if("undefined"!==typeof a.locations&&null!=a.locations&&0<a.locations.length)for(b.push("yer"),t=0,length=a.locations.length;t<length;t++)b.push(h(a.locations[t]))}},O=function(a,b){var c=Date.now,e=d.requestAnimationFrame,q=c(),f,g=function(){c()-q<b||(q+=b,a());f||e(g)};e(g);return{clear:function(){f=1}}},z={homepage:function(a){a.hasOwnProperty("viewName")&&a.viewName&&(f("homepage generated: "+a.viewName),m(a.viewName))},login:function(a){a.hasOwnProperty("viewName")&&a.viewName&&(f("login generated: "+
a.viewName),m(a.viewName))},classified:function(a){f("route \x3d classified");var b=[],c=a.classified;b.push(c.isGet?"get":"ilan");b.push(c.isActive?"aktif":"pasif");b.push(c.isStore?"kurumsal":"bireysel");"undefined"!==typeof c.isUsed&&null!==c.isUsed&&"null"!==c.isUsed&&b.push(c.isUsed?"ikinci-el":"sifir");b.push("kat");a=0;for(length=c.categories.length;a<length;a++)b.push(h(c.categories[a]));b.push("yer");a=0;for(length=c.locations.length;a<length;a++)b.push(h(c.locations[a]));b=u(b);f("custom classified url generated: "+
b);m(b)},postad:function(a){f("route \x3d postad");var b=[],c=a.view;a=a.classified;b.push("ilan-verme");b.push({addclassified1:"kategori",addclassified2:"detay",classified:"onizleme",doping:"doping",addclassified5:"tesekkur"}[c]);H(a,b);b=u(b);f("custom postad url generated: "+b);a.isSucceed&&g(a.succeedData);m(b)},search:function(a){f("route \x3d search");var b=[],c,e=a.categories,d=a.locations;b.push("arama");a.hasOwnProperty("viewName")&&a.viewName&&"search"!==a.viewName&&b.push(a.viewName);"undefined"!==
typeof a.searchResult&&null!==a.searchResult&&"null"!==a.searchResult&&(null!==a.searchResult.isGet&&"null"!==a.searchResult.isGet&&b.push(a.searchResult.isGet?"get":"ilan"),null!==a.searchResult.isUsed&&"null"!==a.searchResult.isUsed&&b.push(a.searchResult.isUsed?"ikinci-el":"sifir"));if(0<e.length)for(c in b.push("kat"),e)b.push(h(e[c]));if(0<d.length)for(c in b.push("yer"),d)b.push(h(d[c]));b=u(b);a.query&&(b+="?q\x3d"+a.query);f("custom search url generated: "+b);m(b)},mapSearch:function(){f("pageView event is fired by map search module")},
category:function(a){f("route \x3d category");var b=[],c;a=a.categories;b.push("kategori");for(c in a)b.push(h(a[c]));b=u(b);f("custom category url generated: "+b);m(b)},store:function(a){f("route \x3d store");var b=[],c,e=a.storeSubdomain.categories;b.push("magaza");b.push({2:"emlak",1:"vasita",3:"alisveris",5:"is-makinesi",4:"hayvanlar-alemi",7:"hepsi-bir",9:"yedek-parca"}[a.storeSubdomain.packetId]);if(0<e.length)for(c in b.push("kat"),e)b.push(h(e[c]));b=u(b);a.storeSubdomain.query&&(b+="?q\x3d"+
a.storeSubdomain.query);f("custom store url generated: "+b);m(b)},payment:function(a){if(a.hasOwnProperty("classified")){var b=[];b.push(a.viewName);H(a.classified,b);a=u(b);f("custom payment url generated: "+a)}else a="/"+a.viewName,f("payment store url generated: "+a);m(a)},register:function(a){f("route \x3d register");var b={"/kayit/":"/uye-ol/","/eposta-kayit/":"/son-1-adim/"};a=a.view;var c,e;for(e in b)if(-1<e.indexOf(a)){c=b[e];break}else c=a;f("submitted page url: "+c);m(c)},custom:function(a){if(a.hasOwnProperty("viewName")&&
a.viewName){var b=[];b.push(a.viewName);b=u(b);f("custom url generated: "+b);m(b)}if(a.hasOwnProperty("trackEvent")&&a.trackEvent)for(var b=0,c=a.trackEvent.length;b<c;b++)B(a.trackEvent[b].category,a.trackEvent[b].action,a.trackEvent[b].label,null,!0)},error:function(a){f("route \x3d error");a="hata_"+a.errorCode+"_"+l.location.href;f("generated error url: "+a);m(a)}},v=function(a){a=l.cookie.match(new RegExp("(; )?"+a+"\x3d([^;]*);?"));return null!==a&&2<a.length?a[2]:null},n=function(a,b,c){c||
(c=new Date,c.setMonth(c.getMonth()+12));l.cookie=a+"\x3d"+b+";expires\x3d"+c+";domain\x3d.sahibinden.com;"},p=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?\x26]"+a+"\x3d([^\x26#]*)")).exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},I=function(){var a=d.pageTrackData,b;if(a&&a.hasOwnProperty("userSegment"))g({"user segment":a.userSegment});else if(b=v("userType"))b=b.replace("_yapi","_ismakineleri"),g({"user segment":b});if(a===
C)f("pageTrackData variable couldn't found. tracking url..."),m();else{b=a.route;g({l:M});g({dc:a.dc||""});a.homepageDesign&&g({homepage_design:a.homepageDesign});a.successfulPaymentWithSavedCC&&g({Category:"Funnel",Action:"kayitliOdeme",Label:"tebrikler",Value:0,event:"gaEvent"});if(a.hasOwnProperty("transactionObject")&&a.transactionObject){if(a.transactionObject.hasOwnProperty("transactionProducts")&&a.transactionObject.transactionProducts&&0<a.transactionObject.transactionProducts.length){var c=
0,e=a.transactionObject.transactionProducts,q=e.length;for(c;c<q;c++)gtm_products.push(e[c])}a.transactionObject.transactionProducts=gtm_products;g(a.transactionObject);a.transactionUserItem&&(g({Category:"Transaction",Action:"Loyalty",Label:"Recurrence",Value:a.transactionUserItem.recurrence,event:"gaEvent"}),g({Category:"Transaction",Action:"Loyalty",Label:"Delay",Value:a.transactionUserItem.delay,event:"gaEvent"}))}var q=l.referrer,c=-1<d.navigator.userAgent.indexOf("EmbeddedBrowser"),e=-1<d.navigator.userAgent.indexOf("SahibindenPro"),
q=0<q.length&&c?"WebView \x3e WebView":C,h="Unknown OS",k=navigator.userAgent;-1!==k.indexOf("like Mac")?h="iOS":-1!==k.indexOf("Android")?h="Android":-1!==k.indexOf("Mac")?h="Macintosh":-1!==k.indexOf("Win")?h="Windows":-1!==k.indexOf("Linux")&&(h="Linux");g({os:h,pixelDensity:d.devicePixelRatio||0,webView:c,SahibindenPro:e},!0);q&&g({Category:q,Action:a.view,Label:a.viewName,Value:0,event:"gaEvent"});if(b in z)z[b](a);else F()||m()}},y="Yepyeni-std";(new RegExp(/nwsh=fct/)).test(l.cookie)&&(y="Yepyeni-fct");
k(1,"Arama Menusu",y,2);k(1,"ilan detay","yeni",2);var w=v("MS1"),r=v("MS2"),J=v("MDR"),y="shuid dopingPurchase dopingTotal dopingFrequency lastDopingPurchase lastVisit getPurchase getTotal getFrequency lastGetPurchase".split(" ");if(w)null!==r&&k(1,"MS2",r,2);else{var w=p("gclid"),K=p("utm_source");if(w)w="adwords";else if(K){if(w=K,null===r&&(r=p("utm_campaign")))n("MS2",r),k(1,"MS2",r,2)}else w=l.referrer;n("MS1",w)}null!==J&&k(1,"MDR",J,2);if(Object.prototype.hasOwnProperty.call(d,"pageTrackData")){pageTrackData.hasOwnProperty("view")&&
pageTrackData.view&&k(1,"pageType",pageTrackData.view,2);if(pageTrackData.hasOwnProperty("customVars")&&pageTrackData.customVars)for(n=0;n<pageTrackData.customVars.length;n++)p=pageTrackData.customVars[n],k(1,h(p.name),p.value?p.value:"",2);pageTrackData.hasOwnProperty("gaParisClassified")&&pageTrackData.gaParisClassified&&g(pageTrackData.gaParisClassified)}n=null===v("shuid")?0:1;k(1,"ULS",n,2);for(n=0;n<y.length;n++)p=y[n],r=v(p),null!==r&&k(1,p,r,2);(function(){var a=parseInt(v("vid"),10)/10;k(1,
"bestmatch-alisveris",0<a&&2>a?"a-2":"b-98",2);k(1,"ab-alisveris_sifir_ikinciel",0<a&&50>a?"a-50":"b-50",2)})();(function(a,b,c,e,d){a[e]=a[e]||[];a[e].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});a=b.getElementsByTagName(c)[0];b=b.createElement(c);b.async=!0;b.src="//www.googletagmanager.com/gtm.js?id\x3d"+d+("dataLayer"!=e?"\x26l\x3d"+e:"");a.parentNode.insertBefore(b,a)})(d,l,"script","dataLayer","GTM-58T6ZP");(function(a){var b=O(function(){"complete"===l.readyState&&(a(),b.clear())},
1)})(I);d.gaTrackData=g;d.gaTrackPageview=m;d.gaReinitializeAndTrackPageview=function(){A=!1;I()};d.gaTrackEvent=B;d.gaTrackEventWithCallback=function(a,b,c,e,d,f){B(a,b,c,e,f);x=function(){d&&d()};setTimeout(x,500)};d.gaHitCallback=function(){x&&(x(),x=null)};d.gaSetCustomVar=k;d.gaAddItem=function(a,b,c,e,d,f){gtm_products.push({sku:b,name:c,category:e,price:d,quantity:f})};d.gaAddTrans=function(a,b,c,d,f){g({transactionId:a,transactionTotal:c,transactionShipping:f,transactionTax:d,transactionProducts:gtm_products,
event:"transaction"})};d.gaTrackTrans=function(){m("_trackTrans")};d.slugify=h;d.gaTrackPostad=z.postad;d.gaTrackPayment=z.payment;d.gaTrackCustomEvent=function(a,b,c,d,f){f=f?f:0;g({Category:b,Action:c,Label:h(d),Value:f,event:a})};d.gaTriggerEvent=G;d.gaOnEvent=function(a,b){l.addEventListener("shbdn-"+a,function(a){a.__eventData||(a.__eventData={});b.call(this,a.__eventData)})}})(window,document);